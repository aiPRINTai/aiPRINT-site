<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>aiPRINT.ai — Gallery-worthy AI Prints</title>

  <!-- Tailwind (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Page colors -->
  <style>
    :root {
      --bg: #0d1117;
      --panel: rgba(255,255,255,0.05);
      --panel-border: rgba(255,255,255,0.12);
      --text: #e6edf3;
      --muted: #9fb0c0;
      --brand: #9ab2ff;
      --glass: rgba(255,255,255,0.06);
    }
    body { background: var(--bg); color: var(--text); }
    .glass { background: var(--glass); border: 1px solid var(--panel-border); backdrop-filter: blur(6px); }
    .ghost-btn { border: 1px solid var(--panel-border); background: transparent; }
    .pill { border: 1px solid var(--panel-border); background: rgba(255,255,255,0.04); }
  </style>

  <!-- Signature fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Pacifico&family=Sacramento&family=Playfair+Display:wght@600&family=Montserrat:wght@700&display=swap" rel="stylesheet">
</head>

<body class="min-h-screen">
  <!-- NAV -->
  <header class="max-w-6xl mx-auto px-5 py-6 flex items-center justify-between">
    <div class="flex items-center gap-2">
      <div class="w-[30px] h-[30px] rounded-md bg-white text-black font-bold grid place-items-center">AI</div>
      <div class="font-semibold">aiPRINT.ai</div>
    </div>
    <nav class="hidden md:flex items-center gap-6 text-sm text-[var(--muted)]">
      <a href="#how" class="hover:text-white">How it works</a>
      <a href="#materials" class="hover:text-white">Materials</a>
      <a href="#create" class="hover:text-white">Create</a>
      <a href="#order" class="hover:text-white">Order</a>
    </nav>
  </header>

  <!-- HERO -->
  <section class="max-w-6xl mx-auto px-5 pt-6 pb-16 grid md:grid-cols-2 gap-10 items-center">
    <div>
      <h1 class="text-4xl md:text-6xl font-extrabold leading-[1.05]">
        Turn any idea into
        <span class="text-[var(--brand)]">a gallery-worthy</span>
        print.
      </h1>
      <p class="mt-5 text-[var(--muted)] max-w-xl">
        Type a prompt. We create the art with AI + a human artist’s eye. You pick size & finish.
        We ship an archival, limited-edition print to your door — ready to hang.
      </p>
      <div class="mt-7 flex flex-wrap gap-3">
        <a href="#create" class="px-5 py-3 rounded-md bg-white text-black font-semibold">Create a preview</a>
        <a href="#how" class="px-5 py-3 rounded-md ghost-btn">See how it works</a>
      </div>
      <p class="mt-6 text-xs text-[var(--muted)]">
        Made in the USA • Archival inks • Premium materials • Certificate of Authenticity
      </p>
    </div>
    <div class="grid gap-4 md:justify-items-end">
      <div class="w-full h-72 rounded-xl overflow-hidden glass border" style="background:url('https://images.unsplash.com/photo-1526318472351-c75fcf070305?q=80&w=1200&auto=format&fit=crop') center/cover no-repeat"></div>
      <div class="flex gap-4">
        <div class="w-40 h-28 rounded-lg overflow-hidden glass border" style="background:url('https://images.unsplash.com/photo-1443890923422-7819ed4101c0?q=80&w=900&auto=format&fit=crop') center/cover no-repeat"></div>
        <div class="w-40 h-28 rounded-lg overflow-hidden glass border" style="background:url('https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=900&auto=format&fit=crop') center/cover no-repeat"></div>
      </div>
    </div>
  </section>

  <!-- HOW IT WORKS -->
  <section id="how" class="max-w-6xl mx-auto px-5 py-14">
    <h2 class="text-3xl md:text-4xl font-bold mb-6">How it works</h2>
    <div class="grid sm:grid-cols-3 gap-5">
      <div class="glass rounded-xl p-5">
        <div class="text-xs uppercase tracking-wider text-[var(--muted)] mb-2">Step 1</div>
        <h3 class="font-semibold mb-2">Describe your idea</h3>
        <p class="text-[var(--muted)] text-sm">
          Share a prompt (style, mood, colors). Optionally add a reference image. We do the rest.
        </p>
      </div>
      <div class="glass rounded-xl p-5">
        <div class="text-xs uppercase tracking-wider text-[var(--muted)] mb-2">Step 2</div>
        <h3 class="font-semibold mb-2">We craft your artwork</h3>
        <p class="text-[var(--muted)] text-sm">
          We generate and hand-curate the best look. You preview it instantly.
        </p>
      </div>
      <div class="glass rounded-xl p-5">
        <div class="text-xs uppercase tracking-wider text-[var(--muted)] mb-2">Step 3</div>
        <h3 class="font-semibold mb-2">Printed. Signed. Shipped.</h3>
        <p class="text-[var(--muted)] text-sm">
          Premium materials, ready-to-hang. Ships in 7–14 days. Happiness guaranteed.
        </p>
      </div>
    </div>
  </section>

  <!-- MATERIALS -->
  <section id="materials" class="max-w-6xl mx-auto px-5 py-14">
    <h2 class="text-3xl md:text-4xl font-bold mb-6">Materials & finishes</h2>
    <div class="grid md:grid-cols-3 gap-5">
      <div class="glass rounded-xl p-5">
        <h3 class="font-semibold">Signature Series — Fine Art Canvas</h3>
        <p class="text-[var(--muted)] text-sm mt-2">
          Archival fine-art canvas with rich texture and deep color; gallery-wrapped; ready to hang.
        </p>
      </div>
      <div class="glass rounded-xl p-5">
        <h3 class="font-semibold">Gallery Edition — ChromaLuxe Metal</h3>
        <p class="text-[var(--muted)] text-sm mt-2">
          Vibrant aluminum print with exceptional depth and durability; float-mounted; ready to hang.
        </p>
      </div>
      <div class="glass rounded-xl p-5">
        <h3 class="font-semibold">Museum Collection — Acrylic Facemount</h3>
        <p class="text-[var(--muted)] text-sm mt-2">
          Museum-grade acrylic facemount with brilliant clarity and polished edges; ready to hang.
        </p>
      </div>
    </div>
  </section>

  <!-- GENERATOR -->
  <section id="create" class="max-w-6xl mx-auto px-5 py-14">
    <h2 class="text-3xl md:text-4xl font-bold mb-4">Create a preview</h2>
    <p class="text-[var(--muted)] mb-6">Describe what you want. We’ll generate a preview. Happy with it? Pick a size and checkout.</p>

    <!-- Controls -->
    <div class="glass rounded-xl border p-5 space-y-5">
      <div class="grid md:grid-cols-3 gap-4">
        <div class="md:col-span-2">
          <label class="text-sm text-[var(--muted)]">Describe what you want</label>
          <input id="prompt" class="w-full mt-1 px-3 py-2 rounded-lg bg-white/10 border border-white/15" placeholder="e.g., sunset over the ocean in watercolor style" />
        </div>
        <div>
          <label class="text-sm text-[var(--muted)]">Aspect ratio</label>
          <select id="ratio" class="w-full mt-1 px-3 py-2 rounded-lg bg-white/10 border border-white/15">
            <option value="square">Square (1:1)</option>
            <option value="landscape">Horizontal (3:2)</option>
            <option value="portrait">Vertical (2:3)</option>
          </select>
          <button id="generate" class="w-full mt-3 rounded-md bg-white text-black font-semibold px-4 py-2">Generate preview</button>
        </div>
      </div>

      <!-- Preview Stage -->
      <div class="relative rounded-xl border overflow-hidden" style="background:#0b0f14;">
        <div id="stage" class="relative w-full aspect-[16/9] grid place-items-center">
          <img id="preview" alt="Preview" class="max-h-[520px] object-contain opacity-80" />
          <!-- Signature overlay -->
          <div id="sig" class="absolute bottom-6 right-6 pointer-events-auto select-none"
               style="font-family:'Great Vibes',cursive; font-size:28px; color:#ffffff; text-shadow: 0 1px 3px rgba(0,0,0,.6); display:none;">
            <span id="sigText"></span>
          </div>
        </div>
      </div>

      <!-- Signature controls -->
      <div class="grid md:grid-cols-4 gap-4 items-end">
        <div>
          <label class="text-sm text-[var(--muted)]">Artist Signature (optional)</label>
          <input id="sigName" class="w-full mt-1 px-3 py-2 rounded-lg bg-white/10 border border-white/15" placeholder="Type your name…" />
        </div>
        <div>
          <label class="text-sm text-[var(--muted)]">Font</label>
          <select id="sigFont" class="w-full mt-1 px-3 py-2 rounded-lg bg-white/10 border border-white/15">
            <option value="'Great Vibes',cursive">Great Vibes (cursive)</option>
            <option value="'Pacifico',cursive">Pacifico (cursive)</option>
            <option value="'Sacramento',cursive">Sacramento (cursive)</option>
            <option value="'Playfair Display',serif">Playfair Display (serif)</option>
            <option value="'Montserrat',sans-serif">Montserrat (bold)</option>
          </select>
        </div>
        <div class="flex items-end gap-3">
          <div>
            <label class="text-sm text-[var(--muted)] block">Color</label>
            <input id="sigColor" type="color" class="w-[46px] h-[40px] rounded-md border border-white/20 bg-white/10" value="#ffffff" />
          </div>
          <div class="flex-1">
            <label class="text-sm text-[var(--muted)]">Size</label>
            <input id="sigSize" type="range" min="16" max="64" value="28" class="w-full mt-1" />
          </div>
        </div>
        <div class="flex items-center gap-3">
          <label class="flex items-center gap-2 mt-6">
            <input id="sigToggle" type="checkbox" class="accent-white" />
            <span class="text-sm">Show on preview</span>
          </label>
        </div>
      </div>

      <!-- Order panel -->
      <div id="order" class="grid md:grid-cols-4 gap-4 pt-2">
        <div>
          <label class="text-sm text-[var(--muted)]">Material</label>
          <select id="medium" class="w-full mt-1 px-3 py-2 rounded-lg bg-white/10 border border-white/15">
            <option value="canvas">Signature Series — Fine Art Canvas</option>
            <option value="metal">Gallery Edition — ChromaLuxe Metal</option>
            <option value="acrylic">Museum Collection — Acrylic Facemount</option>
          </select>
        </div>
        <div>
          <label class="text-sm text-[var(--muted)]">Size</label>
          <select id="size" class="w-full mt-1 px-3 py-2 rounded-lg bg-white/10 border border-white/15">
            <!-- populated by JS based on aspect ratio -->
          </select>
        </div>
        <div class="md:col-span-2 flex items-end gap-3">
          <input id="genUrl" class="flex-1 px-3 py-2 rounded-lg bg-white/10 border border-white/15 text-[var(--muted)]" readonly placeholder="Image URL will appear after generation…" />
          <button id="copyLink" class="rounded-md pill px-4 py-2 text-sm">Copy link</button>
          <button id="checkout" class="rounded-md bg-white text-black font-semibold px-4 py-2 disabled:opacity-50" disabled>Order this print</button>
        </div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="max-w-6xl mx-auto px-5 py-12 text-sm text-[var(--muted)]">
    <div>© <span id="year"></span> aiPRINT.ai — All rights reserved.</div>
    <div class="mt-2">Ships within 7–14 days • Exclusivity: every ordered image is unique to you • Reorders available • No refunds on custom prints (reprint/store credit for damaged items).</div>
  </footer>

  <script>
    // =========================
    // Stripe Payment Links (18)
    // =========================
    const LINKS = {
      // Canvas (6)
      'CAN-24-SQ':    'https://buy.stripe.com/test_6oU00jdsm2D32Dr2dvcV20o',
      'CAN-30-SQ':    'https://buy.stripe.com/test_4gM9AT2NI4Lb4Lzf0hcV20p',
      'CAN-24x16-LS': 'https://buy.stripe.com/test_dRmeVdfAua5va5T6tLcV20q',
      'CAN-30x20-LS': 'https://buy.stripe.com/test_dRmaEXbkeelLfqdbO5cV20r',
      'CAN-16x24-PT': 'https://buy.stripe.com/test_fZu3cvdsmfpP7XL9FXcV20s',
      'CAN-20x30-PT': 'https://buy.stripe.com/test_5kQ28raga7Xn7XLbO5cV20t',

      // Metal (6)
      'MET-24SQ':     'https://buy.stripe.com/test_14A5kDewqgtT0vj9FXcV20u',
      'MET-30SQ':     'https://buy.stripe.com/test_dRm4gzagab9z4Lz3hzcV20v',
      'MET-24x16-LS': 'https://buy.stripe.com/test_cNi4gz0FA3H7guh6tLcV20D',
      'MET-30x20-LS': 'https://buy.stripe.com/test_fZufZhbke2D31znaK1cV20C',
      'MET-16x24-PT': 'https://buy.stripe.com/test_14A28r9c61yZ2DraK1cV20G',
      'MET-20x30-PT': 'https://buy.stripe.com/test_3cI5kDagagtT0vj4lDcV20H',

      // Acrylic (6)
      'ACR-24-SQ':    'https://buy.stripe.com/test_5kQ28raga91r5PD8BTcV20B',
      'ACR-30-SQ':    'https://buy.stripe.com/test_aFa6oHaga6Tjdi54lDcV20A',
      'ACR-24x16-LS': 'https://buy.stripe.com/test_bJe14ndsma5v3Hv5pHcV20z',
      'ACR-30x20-LS': 'https://buy.stripe.com/test_9B628r9c6dhH3Hvg4lcV20y',
      'ACR-16x24-PT': 'https://buy.stripe.com/test_cNi28rfAu91rb9X9FXcV20x',
      'ACR-20x30-PT': 'https://buy.stripe.com/test_eVqbJ1coi5PfguhaK1cV20w',
    };

    // =====================================
    // Size catalog (by medium + aspect)
    // =====================================
    const CATALOG = {
      canvas: {
        square:   [{label:'24×24', key:'CAN-24-SQ'}, {label:'30×30', key:'CAN-30-SQ'}],
        landscape:[{label:'24×16', key:'CAN-24x16-LS'}, {label:'30×20', key:'CAN-30x20-LS'}],
        portrait: [{label:'16×24', key:'CAN-16x24-PT'}, {label:'20×30', key:'CAN-20x30-PT'}]
      },
      metal: {
        square:   [{label:'24×24', key:'MET-24SQ'}, {label:'30×30', key:'MET-30SQ'}],
        landscape:[{label:'24×16', key:'MET-24x16-LS'}, {label:'30×20', key:'MET-30x20-LS'}],
        portrait: [{label:'16×24', key:'MET-16x24-PT'}, {label:'20×30', key:'MET-20x30-PT'}]
      },
      acrylic: {
        square:   [{label:'24×24', key:'ACR-24-SQ'}, {label:'30×30', key:'ACR-30-SQ'}],
        landscape:[{label:'24×16', key:'ACR-24x16-LS'}, {label:'30×20', key:'ACR-30x20-LS'}],
        portrait: [{label:'16×24', key:'ACR-16x24-PT'}, {label:'20×30', key:'ACR-20x30-PT'}]
      }
    };

    // Helper refs
    const promptEl = document.getElementById('prompt');
    const ratioEl  = document.getElementById('ratio');
    const genBtn   = document.getElementById('generate');
    const imgEl    = document.getElementById('preview');
    const genUrlEl = document.getElementById('genUrl');
    const copyBtn  = document.getElementById('copyLink');
    const checkoutBtn = document.getElementById('checkout');
    const mediumEl = document.getElementById('medium');
    const sizeEl   = document.getElementById('size');

    // Signature controls
    const sig = document.getElementById('sig');
    const sigText = document.getElementById('sigText');
    const sigName = document.getElementById('sigName');
    const sigFont = document.getElementById('sigFont');
    const sigColor = document.getElementById('sigColor');
    const sigSize  = document.getElementById('sigSize');
    const sigToggle= document.getElementById('sigToggle');

    // Init sizes for default ratio/medium
    function populateSizes() {
      const aspect = ratioEl.value; // square | landscape | portrait
      const medium = mediumEl.value; // canvas | metal | acrylic
      const options = CATALOG[medium][aspect];
      sizeEl.innerHTML = '';
      options.forEach(o => {
        const opt = document.createElement('option');
        opt.value = o.key;
        opt.textContent = o.label;
        sizeEl.appendChild(opt);
      });
    }
    ratioEl.addEventListener('change', populateSizes);
    mediumEl.addEventListener('change', populateSizes);
    populateSizes();

    // Aspect → OpenAI size
    function openAiSize(aspect) {
      if (aspect === 'square') return '1024x1024';
      if (aspect === 'landscape') return '1536x1024';
      return '1024x1536'; // portrait
    }

    // Generate image
    genBtn.addEventListener('click', async () => {
      const prompt = promptEl.value.trim();
      if (!prompt) {
        alert('Please enter a prompt.');
        return;
      }

      genBtn.disabled = true;
      genBtn.textContent = 'Generating…';

      try {
        const size = openAiSize(ratioEl.value);
        const r = await fetch('/api/generate-image', {
          method: 'POST',
          headers: { 'Content-Type':'application/json' },
          body: JSON.stringify({ prompt, size })
        });
        const data = await r.json();

        if (!r.ok || !data?.image) {
          throw new Error(data?.error || 'Generation failed');
        }

        imgEl.src = data.image;
        genUrlEl.value = data.image;
        checkoutBtn.disabled = false;
      } catch (err) {
        alert(err.message || 'Something went wrong.');
      } finally {
        genBtn.disabled = false;
        genBtn.textContent = 'Generate preview';
      }
    });

    // Copy link
    copyBtn.addEventListener('click', async () => {
      const url = genUrlEl.value;
      if (!url) return;
      try {
        await navigator.clipboard.writeText(url);
        copyBtn.textContent = 'Copied!';
        setTimeout(()=> copyBtn.textContent='Copy link', 1000);
      } catch {}
    });

    // Checkout
    checkoutBtn.addEventListener('click', () => {
      const key = sizeEl.value;         // lookup key
      const url = LINKS[key];
      if (!genUrlEl.value) {
        alert('Please generate a preview first.');
        return;
      }
      if (!url) {
        alert('No payment link configured for this size.');
        return;
      }
      window.location.href = url;
    });

    // Signature logic
    function refreshSig() {
      const name = sigName.value.trim();
      sigText.textContent = name;
      sig.style.fontFamily = sigFont.value;
      sig.style.color = sigColor.value;
      sig.style.fontSize = sigSize.value + 'px';
      sig.style.display = (sigToggle.checked && name) ? 'block' : 'none';
    }
    [sigName,sigFont,sigColor,sigSize,sigToggle].forEach(el => el.addEventListener('input', refreshSig));
    refreshSig();

    // Drag signature
    (function enableDrag() {
      let dragging = false, startX=0, startY=0, startLeft=0, startTop=0;
      sig.addEventListener('mousedown', (e)=>{
        dragging = true;
        const rect = sig.getBoundingClientRect();
        startX = e.clientX; startY = e.clientY;
        startLeft = rect.left; startTop = rect.top;
        e.preventDefault();
      });
      window.addEventListener('mousemove', (e)=>{
        if (!dragging) return;
        const dx = e.clientX - startX;
        const dy = e.clientY - startY;
        sig.style.left = (startLeft + dx - stage.getBoundingClientRect().left) + 'px';
        sig.style.top  = (startTop + dy - stage.getBoundingClientRect().top)  + 'px';
        sig.style.right = 'auto';
        sig.style.bottom = 'auto';
        sig.style.position = 'absolute';
      });
      window.addEventListener('mouseup', ()=> dragging=false);
    })();

    // Footer year
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
